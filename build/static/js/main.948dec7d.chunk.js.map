{"version":3,"sources":["component/menu/menu.js","component/menu/subMenu.js","component/modal.js","component/utils.js","component/index.js","index.js"],"names":["Menu","props","state","this","children","React","Component","SubMenu","handleShow","setState","show","handleUp","index","parentId","handleUpOrDown","alert","handleDown","handleAdd","id","console","log","handleDelete","name","level","hiddenUp","hiddenDown","className","onClick","Modal","title","onClose","onOk","swapItems","arr","index1","index2","splice","Nav","action","newArr","mapArr","length","map","item","upArrayItem","downArrayItem","data","addId","push","Date","now","toString","showAddModal","filter","child","renderMenu","key","showAdd","handleChangeName","e","value","target","undefined","type","onChange","placeholder","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.948dec7d.chunk.js","sourcesContent":["import React from 'react';\r\nclass Menu extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {}\r\n    }\r\n    render() {\r\n        return (\r\n            <ul>\r\n                {this.props.children}\r\n            </ul>\r\n        )\r\n    }\r\n}\r\nexport default Menu","import React from 'react';\r\nimport './menu.css';\r\n\r\nclass SubMenu extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            show: true\r\n        }\r\n    }\r\n    handleShow = () => {\r\n        this.setState({\r\n            show: !this.state.show\r\n        })\r\n    }\r\n    handleUp = () => {\r\n        const { index, parentId } = this.props\r\n        if(parentId) {\r\n            this.props.handleUpOrDown(parentId, index, 'up')\r\n        } else {\r\n            alert('顶级菜单，不能删除和移动')\r\n        }\r\n    }\r\n    handleDown = () => {\r\n        const { index, parentId } = this.props\r\n        if(parentId) {\r\n            this.props.handleUpOrDown(parentId, index, 'down')\r\n        } else {\r\n            alert('顶级菜单，不能删除和移动')\r\n        }\r\n    }\r\n    handleAdd = () => {\r\n        const { id } = this.props\r\n        console.log(id)\r\n        this.props.handleAdd(id)\r\n    }\r\n    handleDelete = () => {\r\n        const { id, parentId } = this.props\r\n        if(parentId) {\r\n            this.props.handleDelete(parentId, id)\r\n        } else {\r\n            alert('顶级菜单，不能删除和移动')\r\n        }\r\n    }\r\n    render() {\r\n        const { name, level, hiddenUp, hiddenDown } = this.props;\r\n        return (\r\n            <li>\r\n                <div className='navBar'>\r\n                    <div className='navTitleContainer' onClick={this.handleShow}>\r\n                        {this.state.show ? <i className=\"iconfont iconxiala\"></i> : <i className=\"iconfont iconzhankai\"></i>}\r\n                        <span>{name}</span>\r\n                    </div>\r\n                    <div className='navActionContianer'>\r\n                        {hiddenUp ? null: <button onClick={this.handleUp}>上移</button>}\r\n                        {hiddenDown ? null: <button onClick={this.handleDown}>下移</button>}\r\n                        {level < 2 ?<button onClick={level < 2 ? this.handleAdd : null}>添加下一级</button> : null}\r\n                        {level === 0 ? null : <button onClick={this.handleDelete}>删除</button>}\r\n                    </div>\r\n                </div>\r\n                {\r\n                    this.state.show\r\n                        ? <ul>\r\n                            {this.props.children}\r\n                        </ul>\r\n                        : null\r\n                }\r\n            </li>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SubMenu","import React from 'react';\r\nimport './modal.css'\r\n/**\r\n * 弹出窗口组件\r\n */\r\nclass Modal extends React.Component {\r\n    render() {\r\n        const { title } = this.props;\r\n        return (\r\n            <div className={this.props.show ? 'modal ' : 'modal hidden'}>\r\n                <div className='modal-mask'></div>\r\n                <div className='modal-content'>\r\n                    <div className='modal-header'>\r\n                        <span className='modal-title'>{title}</span>\r\n                        <div className='modal-close'>\r\n                            <i onClick={this.props.onClose} className=\"iconfont iconguanbi\"></i>\r\n                        </div>\r\n                    </div>\r\n                    <div className='modal-body'>\r\n                        {this.props.children}\r\n                    </div>\r\n                    <div className='modal-footer'>\r\n                        <button onClick={this.props.onClose} className='button'>\r\n                            <span>取消</span>\r\n                        </button>\r\n                        <button onClick={this.props.onOk} className='button button-primary'>\r\n                            <span>确定</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Modal","// 交换数组子项\r\nconst swapItems = (arr, index1, index2) => {\r\n    arr[index1] = arr.splice(index2, 1, arr[index1])[0];\r\n    return arr;\r\n};\r\n\r\n// 上移\r\nconst upArrayItem = (arr, index) => {\r\n    if (index === 0) {\r\n        return arr;\r\n    }\r\n    return swapItems(arr, index, index - 1);\r\n};\r\n\r\n// 下移\r\nconst downArrayItem = (arr, index) => {\r\n    if (index === arr.length - 1) {\r\n        return arr;\r\n    }\r\n    return swapItems(arr, index, index + 1);\r\n}\r\nexport {\r\n    swapItems,\r\n    upArrayItem,\r\n    downArrayItem\r\n}","import React from 'react';\r\nimport Menu from './menu/menu';\r\nimport SubMenu from './menu/subMenu';\r\nimport Modal from './modal'\r\nimport './index.css'\r\nimport { upArrayItem, downArrayItem } from './utils'\r\n\r\nclass Nav extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            data: [{\r\n                name: '导航一',\r\n                id: '1',\r\n                level: 0,\r\n                children: []\r\n            }],\r\n            name: '',\r\n            showAddModal: false,\r\n            addId: undefined,\r\n        }\r\n    }\r\n    // 上移或者下移\r\n    handleUpOrDown = (parentId, index, action) => {\r\n        const { data } = this.state;\r\n        let mapArr = (arr) => {\r\n            if (arr && arr.length) {\r\n                return arr.map(item => {\r\n                    if (item.id === parentId) {\r\n                        if (action === 'up') {\r\n                            item.children = upArrayItem(item.children, index)\r\n                        } else if (action === 'down') {\r\n                            item.children = downArrayItem(item.children, index)\r\n                        }\r\n                    } else if (item.children && item.children.length) {\r\n                        item.children = mapArr(item.children)\r\n                    }\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n        let newArr = mapArr(data)\r\n        this.setState({\r\n            data: newArr\r\n        })\r\n    }\r\n    // 新增菜单\r\n    handleAdd = () => {\r\n        const { data, name, addId } = this.state;\r\n        console.log(data, name, addId)\r\n        let mapArr = (arr) => {\r\n            if (arr && arr.length) {\r\n                return arr.map(item => {\r\n                    if (item.id === addId) {\r\n                        if (item.children && item.children.length) {\r\n                            item.children.push({\r\n                                name: name,\r\n                                id: Date.now().toString(36),\r\n                                level: item.level + 1,\r\n                                children: []\r\n                            })\r\n                        } else {\r\n                            item.children = [{\r\n                                name: name,\r\n                                id: Date.now().toString(36),\r\n                                level: item.level + 1,\r\n                                children: []\r\n                            }]\r\n                        }\r\n                    } else if (item.children && item.children.length) {\r\n                        item.children = mapArr(item.children)\r\n                    }\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n        if (name) {\r\n            let newArr = mapArr(data)\r\n            this.setState({\r\n                data: newArr,\r\n                showAddModal: false,\r\n                name: ''\r\n            })\r\n        } else {\r\n            alert('菜单名称不能为空')\r\n        }\r\n    }\r\n    // 删除菜单\r\n    handleDelete = (parentId, id) => {\r\n        const { data } = this.state;\r\n        let mapArr = (arr) => {\r\n            if (arr && arr.length) {\r\n                return arr.map(item => {\r\n                    if (item.id === parentId) {\r\n                        item.children = (item.children || []).filter(child => child.id !== id) \r\n                    } else if (item.children && item.children.length) {\r\n                        item.children = mapArr(item.children)\r\n                    }\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n        let newArr = mapArr(data)\r\n        console.log(newArr)\r\n        this.setState({\r\n            data: newArr\r\n        })\r\n    }\r\n    // 根据data生成菜单\r\n    renderMenu = (arr = [], parentId) => {\r\n        if (arr && arr.length) {\r\n            return arr.map((item, index) => {\r\n                if (item && item.children && item.children.length) {\r\n                    return <SubMenu\r\n                        name={item.name}\r\n                        id={item.id}\r\n                        level={item.level}\r\n                        key={index}\r\n                        index={index}\r\n                        hiddenUp={index === 0}\r\n                        hiddenDown={index === arr.length - 1}\r\n                        parentId={parentId}\r\n                        handleUpOrDown={this.handleUpOrDown}\r\n                        handleDelete={this.handleDelete}\r\n                        handleAdd={this.showAdd}\r\n                    >\r\n                        {this.renderMenu(item.children, item.id)}\r\n                    </SubMenu>\r\n                }\r\n                return <SubMenu\r\n                    name={item.name}\r\n                    id={item.id}\r\n                    level={item.level}\r\n                    key={index}\r\n                    index={index}\r\n                    hiddenUp={index === 0}\r\n                    hiddenDown={index === arr.length - 1}\r\n                    parentId={parentId}\r\n                    handleUpOrDown={this.handleUpOrDown}\r\n                    handleDelete={this.handleDelete}\r\n                    handleAdd={this.showAdd}\r\n                />\r\n            })\r\n        }\r\n        return null\r\n    }\r\n    // 编辑名称\r\n    handleChangeName = (e) => {\r\n        let value = e && e.target ? e.target.value : e;\r\n        this.setState({\r\n            name: value\r\n        })\r\n    }\r\n    // 关闭弹窗\r\n    onClose = () => {\r\n        this.setState({\r\n            showAddModal: false,\r\n            name: '',\r\n            addId: undefined,\r\n        })\r\n    }\r\n    // 新增菜单打开弹窗\r\n    showAdd = (id) => {\r\n        console.log(id)\r\n        this.setState({\r\n            addId: id,\r\n            showAddModal: true\r\n        })\r\n    }\r\n    render() {\r\n        const { data, name, showAddModal } = this.state;\r\n        return (\r\n            <div className='mainContainer'>\r\n                <Menu>\r\n                    {this.renderMenu(data)}\r\n                </Menu>\r\n                <Modal\r\n                    title='编辑名称'\r\n                    show={showAddModal}\r\n                    onClose={this.onClose}\r\n                    onOk={this.handleAdd}\r\n                >\r\n                    <input className='nameInput' type='text' value={name} onChange={this.handleChangeName} placeholder='请输入内容' />\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Nav","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Nav from './component';\n\nReactDOM.render(<Nav />, document.getElementById('root'));\n"],"sourceRoot":""}